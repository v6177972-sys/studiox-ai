<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>StudioX AI | Ready</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;700;800&display=swap');
        body { background-color: #000; color: #fff; font-family: 'Plus Jakarta Sans', sans-serif; }
        .ui-card { background: rgba(18, 18, 22, 0.95); border: 1px solid rgba(255,255,255,0.1); border-radius: 2rem; }
        .btn-glow { background: linear-gradient(135deg, #6366f1, #a855f7); box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ==========================================
        // INSERISCI LA TUA NUOVA CHIAVE GOOGLE QUI SOTTO
        // ==========================================
        const GOOGLE_API_KEY = "AIzaSyCiaPmeuschK5EYRj96kKmcIw3CkXz_VOY"; 

        function App() {
            const [nrg, setNrg] = useState(() => Number(localStorage.getItem('sx_nrg')) || 50);
            const [input, setInput] = useState("");
            const [result, setResult] = useState("");
            const [loading, setLoading] = useState(false);

            useEffect(() => { localStorage.setItem('sx_nrg', nrg); }, [nrg]);

            const generate = async () => {
                if (!GOOGLE_API_KEY || GOOGLE_API_KEY.includes("CHIAVE")) return alert("Inserisci la chiave API nel codice!");
                if (nrg < 10) return alert("Energia esaurita! Usa il tasto Bonus.");
                
                setLoading(true);
                try {
                    const resp = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${GOOGLE_API_KEY}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ contents: [{ parts: [{ text: `Scrivi un post social virale per: ${input}` }] }] })
                    });
                    const data = await resp.json();
                    setResult(data.candidates[0].content.parts[0].text);
                    setNrg(nrg - 10);
                } catch (e) {
                    alert("Errore API: Controlla la chiave.");
                } finally { setLoading(false); }
            };

            return (
                <div className="max-w-md mx-auto min-h-screen p-6 flex flex-col gap-6">
                    <div className="flex justify-between items-center py-4">
                        <h1 className="text-2xl font-black italic">STUDIOX<span className="text-indigo-500 underline">AI</span></h1>
                        <div className="bg-zinc-900 px-4 py-2 rounded-2xl border border-zinc-800 font-bold">âš¡ {nrg}</div>
                    </div>

                    <div className="ui-card p-6 space-y-4">
                        <textarea 
                            value={input}
                            onChange={(e) => setInput(e.target.value)}
                            placeholder="Di cosa vuoi parlare?"
                            className="w-full bg-transparent border-none text-white h-24 resize-none"
                        />
                        <button onClick={generate} disabled={loading} className="w-full btn-glow py-4 rounded-xl font-bold uppercase tracking-widest">
                            {loading ? "Generazione..." : "Crea Post"}
                        </button>
                    </div>

                    {result && (
                        <div className="ui-card p-6 animate-in fade-in italic text-zinc-300 text-sm whitespace-pre-wrap">
                            {result}
                        </div>
                    )}

                    <button 
                        onClick={() => { setNrg(nrg + 20); window.open('https://google.com', '_blank'); }}
                        className="w-full bg-zinc-900 border border-zinc-800 p-6 rounded-3xl flex justify-between items-center hover:bg-zinc-800 transition-all"
                    >
                        <span className="font-bold text-sm">ðŸ“º Guarda Sponsor</span>
                        <span className="text-green-500 font-bold">+20âš¡</span>
                    </button>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

