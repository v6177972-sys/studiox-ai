<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ViralGen AI</title>
    
    <!-- Script necessari caricati in modo infallibile -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;700;800&display=swap');
        
        body { 
            background: #000; 
            color: #fff; 
            font-family: 'Plus Jakarta Sans', sans-serif;
            margin: 0;
            padding: 0;
        }

        .neon-border {
            border: 1px solid rgba(168, 85, 247, 0.2);
            box-shadow: 0 0 20px rgba(168, 85, 247, 0.1);
        }

        .btn-main {
            background: linear-gradient(90deg, #6366f1, #a855f7);
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .card-dark {
            background: #0a0a0c;
            border: 1px solid #1a1a1e;
        }

        .loader {
            border: 2px solid #f3f3f3;
            border-top: 2px solid #a855f7;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function App() {
            const [nrg, setNrg] = useState(25);
            const [input, setInput] = useState('');
            const [loading, setLoading] = useState(false);
            const [result, setResult] = useState('');
            const [toast, setToast] = useState('');

            const API_KEY = "AIzaSyA-t4HPU63sjwlxGaHOR3__08cLJRRqyLs";

            const notify = (msg) => {
                setToast(msg);
                setTimeout(() => setToast(''), 3000);
            };

            const generate = async () => {
                if (!input.trim()) return notify("Scrivi un'idea!");
                if (nrg < 5) return notify("Energia esaurita!");

                setLoading(true);
                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: `Crea un post virale e 10 hashtag per: ${input}` }] }]
                        })
                    });
                    const data = await response.json();
                    setResult(data.candidates[0].content.parts[0].text);
                    setNrg(prev => prev - 5);
                    notify("Generato! -5 N-RG");
                } catch (e) {
                    notify("Errore API");
                } finally {
                    setLoading(false);
                }
            };

            return (
                <div className="min-h-screen max-w-md mx-auto p-6 flex flex-col gap-6">
                    {/* Header */}
                    <header className="flex justify-between items-center">
                        <div>
                            <h1 className="text-2xl font-extrabold italic tracking-tighter">VIRAL<span className="text-purple-500">GEN</span></h1>
                            <p className="text-[8px] font-bold text-zinc-600 uppercase tracking-widest">GitHub AI Monetizer</p>
                        </div>
                        <div className="bg-zinc-900 border border-purple-500/30 px-4 py-2 rounded-2xl flex items-center gap-2">
                            <span className="text-yellow-400 font-bold">‚ö°</span>
                            <span className="text-sm font-black">{nrg}</span>
                        </div>
                    </header>

                    {/* Partner Card (Monetizzazione) */}
                    <div className="card-dark p-4 rounded-3xl flex items-center gap-4">
                        <div className="bg-purple-500/20 p-3 rounded-2xl text-xl">üõçÔ∏è</div>
                        <div className="flex-1">
                            <p className="text-[10px] font-bold text-purple-400 uppercase">Partner</p>
                            <p className="text-xs text-zinc-400">Prova Canva Pro Gratis</p>
                        </div>
                        <span className="text-zinc-700">‚Üí</span>
                    </div>

                    {/* Tool Card */}
                    <div className="card-dark p-6 rounded-[2.5rem] shadow-xl space-y-4">
                        <textarea 
                            value={input}
                            onChange={(e) => setInput(e.target.value)}
                            placeholder="Descrivi il tuo post..."
                            className="w-full bg-transparent border-none focus:ring-0 text-lg h-32 resize-none text-white placeholder:text-zinc-800"
                        />
                        
                        <button 
                            onClick={generate}
                            disabled={loading}
                            className="w-full btn-main py-4 rounded-2xl flex items-center justify-center gap-3 transition-all active:scale-95 disabled:opacity-50"
                        >
                            {loading ? <div className="loader"></div> : "‚ú®"}
                            {loading ? "Analisi..." : "Rendi Virale"}
                        </button>
                    </div>

                    {/* Result */}
                    {result && (
                        <div className="card-dark p-6 rounded-3xl animate-pulse-once">
                            <div className="flex justify-between items-center mb-4">
                                <span className="text-[10px] font-bold text-green-500 uppercase tracking-widest">Contenuto AI</span>
                                <button onClick={() => {navigator.clipboard.writeText(result); notify("Copiato!");}} className="text-zinc-600 text-xs">COPIA</button>
                            </div>
                            <div className="text-sm text-zinc-300 whitespace-pre-wrap leading-relaxed">
                                {result}
                            </div>
                        </div>
                    )}

                    {/* Reward AD Area */}
                    <div 
                        onClick={() => {setNrg(n => n + 10); notify("+10 N-RG");}}
                        className="card-dark p-5 rounded-3xl flex items-center justify-between cursor-pointer hover:bg-zinc-900 transition-all"
                    >
                        <div className="flex items-center gap-4">
                            <span className="text-2xl">üì∫</span>
                            <div>
                                <p className="text-xs font-bold text-zinc-200">Ottieni Energia</p>
                                <p className="text-[10px] text-zinc-500 uppercase">Guarda uno sponsor</p>
                            </div>
                        </div>
                        <span className="text-green-500 font-bold text-xs">+10</span>
                    </div>

                    {/* Banner Ads Placeholder */}
                    <div className="w-full h-20 bg-zinc-900/50 rounded-2xl border border-dashed border-zinc-800 flex items-center justify-center">
                        <span className="text-[7px] font-bold text-zinc-700 uppercase tracking-widest">Spazio Pubblicitario AdSense</span>
                    </div>

                    {/* Toast */}
                    {toast && (
                        <div className="fixed bottom-10 left-1/2 -translate-x-1/2 bg-white text-black px-6 py-3 rounded-full shadow-2xl font-bold text-[10px] uppercase">
                            {toast}
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

