<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ViralGen AI | Monetizza i tuoi Social</title>
    
    <!-- Librerie caricate via CDN per evitare schermate nere -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide-react"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
        
        body { 
            background: #000; 
            color: #fff; 
            font-family: 'Plus Jakarta Sans', sans-serif;
            margin: 0;
            -webkit-tap-highlight-color: transparent;
        }

        .glass-ui {
            background: rgba(20, 20, 23, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 2rem;
        }

        .nrg-glow {
            box-shadow: 0 0 15px rgba(168, 85, 247, 0.2);
            border: 1px solid rgba(168, 85, 247, 0.4);
        }

        .btn-gradient {
            background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
            transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .btn-gradient:active { transform: scale(0.95); }

        /* Nasconde la scrollbar ma permette lo scroll */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { 
            Instagram, Youtube, Copy, Sparkles, 
            Zap, PlayCircle, Share2, Loader2, 
            ShoppingBag, ChevronRight, MessageCircle 
        } = lucide;

        // --- CONFIGURAZIONE CHIAVE API ---
        const API_KEY = "AIzaSyA-t4HPU63sjwlxGaHOR3__08cLJRRqyLs";

        function App() {
            const [nrg, setNrg] = useState(() => Number(localStorage.getItem('vgen_nrg')) || 25);
            const [topic, setTopic] = useState('');
            const [platform, setPlatform] = useState('Instagram');
            const [loading, setLoading] = useState(false);
            const [result, setResult] = useState('');
            const [toast, setToast] = useState('');

            useEffect(() => {
                localStorage.setItem('vgen_nrg', nrg);
            }, [nrg]);

            const showToast = (msg) => {
                setToast(msg);
                setTimeout(() => setToast(""), 3000);
            };

            const generateContent = async () => {
                if (!topic.trim()) return showToast("Scrivi l'idea del tuo video!");
                if (nrg < 5) return showToast("Energia insufficiente!");

                setLoading(true);
                try {
                    const prompt = `Sei un esperto di social media marketing virale. Crea 3 varianti di caption (Short, Engaging, Storytelling) e 15 hashtag strategici per un video su ${platform} riguardante: ${topic}. Usa molte emoji e rendi il testo irresistibile.`;
                    
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                    });
                    
                    const data = await response.json();
                    const text = data.candidates[0].content.parts[0].text;
                    
                    setResult(text);
                    setNrg(prev => prev - 5);
                    showToast("Generato! -5 N-RG");
                } catch (e) {
                    showToast("Errore di connessione");
                } finally {
                    setLoading(false);
                }
            };

            return (
                <div className="min-h-screen max-w-md mx-auto flex flex-col p-5 space-y-6 pb-12 bg-black border-x border-zinc-900">
                    
                    {/* Header */}
                    <header className="flex justify-between items-center py-4">
                        <div className="flex flex-col">
                            <h1 className="text-2xl font-black tracking-tighter italic">VIRAL<span className="text-purple-500">GEN</span></h1>
                            <p className="text-[8px] font-bold text-zinc-500 uppercase tracking-[0.4em]">AI Social Accelerator</p>
                        </div>
                        <div className="nrg-glow bg-zinc-900 px-4 py-2 rounded-2xl flex items-center gap-2">
                            <Zap size={12} className="text-yellow-400 fill-yellow-400" />
                            <span className="text-sm font-black tracking-tight">{nrg}</span>
                        </div>
                    </header>

                    {/* Affiliazione / Monetizzazione 1 */}
                    <div className="glass-ui p-4 flex items-center gap-4 bg-gradient-to-r from-purple-900/10 to-transparent">
                        <div className="bg-purple-600/20 p-2 rounded-xl text-purple-400">
                            <ShoppingBag size={20} />
                        </div>
                        <div className="flex-1">
                            <p className="text-[10px] font-bold text-purple-400 uppercase">Sponsor</p>
                            <p className="text-[11px] text-zinc-300">Usa Canva Pro per la tua grafica</p>
                        </div>
                        <ChevronRight size={14} className="text-zinc-700" />
                    </div>

                    {/* Tool Form */}
                    <div className="glass-ui p-6 shadow-2xl space-y-6">
                        <div className="space-y-3">
                            <label className="text-[9px] font-black text-zinc-600 uppercase tracking-widest ml-1">Piattaforma</label>
                            <div className="flex gap-2">
                                {[
                                    { id: 'Instagram', icon: <Instagram size={16}/> },
                                    { id: 'TikTok', icon: <MessageCircle size={16}/> },
                                    { id: 'YouTube', icon: <Youtube size={16}/> }
                                ].map(p => (
                                    <button 
                                        key={p.id}
                                        onClick={() => setPlatform(p.id)}
                                        className={`flex-1 py-3 rounded-xl flex items-center justify-center transition-all ${platform === p.id ? 'bg-white text-black' : 'bg-zinc-900 text-zinc-600'}`}
                                    >
                                        {p.icon}
                                    </button>
                                ))}
                            </div>
                        </div>

                        <div className="space-y-3">
                            <label className="text-[9px] font-black text-zinc-600 uppercase tracking-widest ml-1">L'idea del tuo video</label>
                            <textarea 
                                value={topic}
                                onChange={(e) => setTopic(e.target.value)}
                                placeholder="Esempio: Una ricetta di pasta veloce o un workout a casa..."
                                className="w-full bg-zinc-900/50 border-none rounded-2xl p-4 text-sm h-28 focus:ring-1 focus:ring-purple-500/50 text-white placeholder:text-zinc-800"
                            />
                        </div>

                        <button 
                            onClick={generateContent}
                            disabled={loading}
                            className="w-full btn-gradient py-4 rounded-2xl font-black text-[10px] uppercase tracking-[0.2em] flex items-center justify-center gap-2 disabled:opacity-50"
                        >
                            {loading ? <Loader2 size={16} className="animate-spin" /> : <Sparkles size={16} />}
                            {loading ? "Analisi AI..." : "Genera Viralit√†"}
                        </button>
                    </div>

                    {/* Result View */}
                    {result && (
                        <div className="glass-ui p-6 animate-in fade-in slide-in-from-bottom-4 border-green-500/10">
                            <div className="flex justify-between items-center mb-4">
                                <span className="text-[9px] font-black text-green-500 uppercase tracking-widest">Risultato Ottimizzato</span>
                                <button 
                                    onClick={() => { navigator.clipboard.writeText(result); showToast("Copiato!"); }}
                                    className="p-2 bg-zinc-900 rounded-lg text-zinc-500 active:text-white"
                                >
                                    <Copy size={16} />
                                </button>
                            </div>
                            <div className="text-zinc-300 text-[13px] leading-relaxed whitespace-pre-wrap italic">
                                {result}
                            </div>
                        </div>
                    )}

                    {/* Monetizzazione 2: Video Reward */}
                    <div 
                        onClick={() => { setNrg(p => p + 10); showToast("+10 N-RG"); }}
                        className="glass-ui p-5 flex items-center justify-between cursor-pointer active:bg-zinc-900 transition-colors group"
                    >
                        <div className="flex items-center gap-4">
                            <div className="bg-green-500/10 p-3 rounded-2xl text-green-500">
                                <PlayCircle size={24} />
                            </div>
                            <div>
                                <p className="text-xs font-bold text-zinc-200">Ottieni Energia Extra</p>
                                <p className="text-[10px] text-zinc-500 uppercase font-black tracking-tighter">Guarda uno sponsor (+10 N-RG)</p>
                            </div>
                        </div>
                        <ChevronRight size={14} className="text-zinc-800" />
                    </div>

                    {/* Spazio Banner ADS */}
                    <div className="w-full h-20 bg-zinc-900/30 border border-dashed border-zinc-800 rounded-3xl flex items-center justify-center">
                        <span className="text-[7px] font-bold text-zinc-800 uppercase tracking-[0.5em] text-center px-4 leading-relaxed">
                            Area Pubblicitaria Disponibile<br/>AdSense / Sponsor Direct
                        </span>
                    </div>

                    {/* Toast */}
                    {toast && (
                        <div className="fixed bottom-10 left-1/2 -translate-x-1/2 bg-white text-black px-8 py-3 rounded-full shadow-2xl z-[100] animate-bounce text-[10px] font-black uppercase">
                            {toast}
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

