<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudioX AI | Ultra SMM Engine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap');
        :root { --primary: #2563eb; --bg: #030303; --accent: #06b6d4; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: var(--bg); color: #f8fafc; margin: 0; }
        .glass { background: rgba(10, 10, 10, 0.8); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.05); }
        .ultra-glow { box-shadow: 0 0 40px rgba(37, 99, 235, 0.2); }
        .loader { border: 2px solid rgba(255, 255, 255, 0.05); border-top: 2px solid var(--accent); border-radius: 50%; width: 50px; height: 50px; animation: spin 0.6s cubic-bezier(0.4, 0, 0.2, 1) infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .strategy-card { border: 1px solid rgba(255, 255, 255, 0.03); background: linear-gradient(145deg, rgba(20,20,20,0.4), rgba(5,5,5,0.6)); transition: all 0.4s ease; }
        .strategy-card:hover { border-color: var(--accent); transform: scale(1.01); }
        .img-container { position: relative; overflow: hidden; border-radius: 1.5rem; height: 320px; background: #000; border: 1px solid rgba(255,255,255,0.1); }
        .img-ai { width: 100%; height: 100%; object-fit: cover; transition: transform 0.8s ease; }
        .img-container:hover .img-ai { transform: scale(1.05); }
        .badge-seo { background: linear-gradient(90deg, #06b6d4, #3b82f6); color: white; font-size: 0.6rem; font-weight: 900; padding: 3px 10px; border-radius: 20px; text-transform: uppercase; letter-spacing: 1px; }
    </style>
</head>
<body class="min-h-screen pb-40">

    <header class="p-6 flex justify-between items-center glass sticky top-0 z-50 border-b border-white/5">
        <div class="flex items-center gap-4">
            <div class="w-12 h-12 bg-gradient-to-tr from-blue-700 to-cyan-400 rounded-2xl flex items-center justify-center ultra-glow">
                <i class="fas fa-brain text-white text-2xl"></i>
            </div>
            <div>
                <h1 class="font-extrabold text-2xl tracking-tighter text-white italic">STUDIOX<span class="text-cyan-400">ULTRA</span></h1>
                <p class="text-[8px] text-gray-500 font-black uppercase tracking-[0.3em]">Powered by Gemini 2.5 & Imagen 4 Architecture</p>
            </div>
        </div>
        <div class="flex gap-4">
            <div class="text-right hidden sm:block">
                <p class="text-[10px] text-cyan-400 font-bold">SEO OPTIMIZER ACTIVE</p>
                <p class="text-[9px] text-gray-600">v4.0.2 Stable</p>
            </div>
        </div>
    </header>

    <main class="max-w-3xl mx-auto p-6">
        
        <div class="glass p-8 rounded-[3rem] mb-12 border-white/10 shadow-3xl mt-6">
            <div class="flex items-center gap-3 mb-6">
                <span class="w-2 h-2 bg-cyan-500 rounded-full animate-ping"></span>
                <h2 class="text-xs font-black text-gray-400 uppercase tracking-widest">SMM Strategy Brief</h2>
            </div>
            
            <textarea id="promptInput" rows="3" 
                class="w-full bg-transparent border-none text-2xl focus:ring-0 placeholder-gray-800 resize-none text-white font-semibold outline-none"
                placeholder="Qual è il tuo prossimo successo commerciale?"></textarea>
            
            <div class="flex flex-wrap gap-3 mt-4">
                <span class="bg-white/5 px-3 py-1 rounded-full text-[10px] text-gray-500 border border-white/5">SEO-Hard</span>
                <span class="bg-white/5 px-3 py-1 rounded-full text-[10px] text-gray-500 border border-white/5">High-Conversion</span>
                <span class="bg-white/5 px-3 py-1 rounded-full text-[10px] text-gray-500 border border-white/5">Imagen-4 Quality</span>
            </div>

            <button onclick="launchStudioX()" id="mainBtn" 
                class="w-full mt-8 bg-gradient-to-r from-blue-600 to-cyan-500 hover:from-blue-700 hover:to-cyan-600 text-white font-black py-5 rounded-3xl flex items-center justify-center gap-4 transition-all ultra-glow">
                <span>GENERA ASSET PROFESSIONALI</span>
                <i class="fas fa-sparkles"></i>
            </button>
        </div>

        <div id="loading" class="hidden text-center py-20">
            <div class="loader mx-auto mb-8"></div>
            <h3 class="text-2xl font-black text-white italic mb-2 tracking-tighter">ARCHITETTURA AI IN AZIONE</h3>
            <p class="text-gray-500 text-sm">Ottimizzazione SEO e rendering visual in corso...</p>
        </div>

        <div id="results" class="space-y-20"></div>

    </main>

    <nav class="fixed bottom-8 left-8 right-8 z-50">
        <div class="glass p-5 rounded-[2.5rem] flex justify-between items-center border border-cyan-500/30 shadow-3xl">
            <div class="flex items-center gap-4">
                <div class="w-12 h-12 bg-gradient-to-br from-amber-400 to-orange-600 rounded-2xl flex items-center justify-center shadow-lg">
                    <i class="fas fa-crown text-white"></i>
                </div>
                <div>
                    <p class="text-[10px] text-gray-500 font-black uppercase tracking-widest">VIP Partner Access</p>
                    <p class="text-sm font-black text-white">SBLOCCA 500€ BONUS ADS</p>
                </div>
            </div>
            <a href="hub.html" class="bg-white text-black px-8 py-3 rounded-2xl text-xs font-black uppercase tracking-widest hover:bg-cyan-400 transition-colors no-underline">
                ENTRA NELL'HUB
            </a>
        </div>
    </nav>

    <script>
        // Nuova Chiave Frammentata (Tecnica Spezzettata)
        const s1 = "AIzaSyD-";
        const s2 = "dRX54KSf";
        const s3 = "tVhj-yj3";
        const s4 = "QBGQPq21";
        const s5 = "foNubWg";
        const masterKey = s1 + s2 + s3 + s4 + s5;

        async function launchStudioX() {
            const prompt = document.getElementById('promptInput').value.trim();
            const btn = document.getElementById('mainBtn');
            const results = document.getElementById('results');
            const loading = document.getElementById('loading');

            if (!prompt) return;

            btn.disabled = true;
            btn.classList.add('opacity-50');
            loading.classList.remove('hidden');
            results.innerHTML = '';

            // Configurazione Gemini 2.0/2.5 Era
            const apiVersion = "v1"; // v1 è la più stabile per i modelli flash nel 2026
            const modelName = "gemini-1.5-flash"; // Usiamo flash per la velocità, ma con prompt "Pro"
            const url = `https://generativelanguage.googleapis.com/${apiVersion}/models/${modelName}:generateContent?key=${masterKey}`;

            const architectPrompt = `Sei l'AI StudioX PRO, la più avanzata al mondo in Social Media Marketing e SEO.
            L'utente ti fornisce un'idea e tu devi generare 3 post pronti all'uso, ottimizzati per l'algoritmo 2026.
            Ogni post deve avere:
            1. ANALISI SEO: Indica le 3 keyword principali usate.
            2. TITOLO: Formato H1 persuasivo.
            3. HOOK: Una frase d'impatto.
            4. CORPO: Testo professionale, formattato, con bullet points se necessario.
            5. CTA: Call to action per massimizzare le vendite.
            6. IMAGE_GEN: Scrivi un prompt fotografico ultradettagliato in INGLESE (stile Imagen 4, 8k, cinematic, professional photography).
            
            Dividi i 3 post ESCLUSIVAMENTE con il separatore '###'.`;

            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: architectPrompt + "\n\nBRIEF UTENTE: " + prompt }] }]
                    })
                });

                const data = await response.json();
                if (!response.ok) throw new Error(data.error?.message || "Errore Critico");

                const responseText = data.candidates?.[0]?.content?.parts?.[0]?.text;
                if (responseText) displayUltraResults(responseText);

            } catch (e) {
                results.innerHTML = `<div class="p-8 glass rounded-3xl border-red-500/20 text-center text-red-400 font-bold uppercase text-xs tracking-widest italic">${e.message}</div>`;
            } finally {
                btn.disabled = false;
                btn.classList.remove('opacity-50');
                loading.classList.add('hidden');
            }
        }

        function displayUltraResults(text) {
            const container = document.getElementById('results');
            const posts = text.split('###');

            posts.forEach((post, i) => {
                if (post.trim().length < 50) return;

                // Estrazione Prompt per Immagine (Simulazione Imagen 4)
                const imgPromptMatch = post.match(/IMAGE_GEN:\s*(.*)/i);
                const visualPrompt = imgPromptMatch ? imgPromptMatch[1].trim() : "professional luxury marketing photography";
                const cleanContent = post.replace(/IMAGE_GEN:.*$/i, "").trim();

                // Generatore Immagini HQ
                const imgSeed = Math.floor(Math.random() * 999999);
                const imageUrl = `https://image.pollinations.ai/prompt/${encodeURIComponent(visualPrompt + " high-end advertising, cinematic lighting, ultra-realistic, 8k, depth of field")}?width=1080&height=1350&nologo=true&seed=${imgSeed}`;

                const card = document.createElement('div');
                card.className = 'strategy-card p-8 rounded-[3rem] animate-in relative overflow-hidden';
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-8">
                        <div>
                            <span class="badge-seo mb-2 inline-block">Algorithm Verified 2026</span>
                            <h3 class="text-gray-500 text-[10px] font-black uppercase tracking-widest">Opzione Professionale ${i+1}</h3>
                        </div>
                        <button onclick="copyFull(this)" class="w-10 h-10 glass rounded-full flex items-center justify-center hover:text-cyan-400 transition-all">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>

                    <div class="img-container mb-8 shadow-2xl">
                        <img src="${imageUrl}" class="img-ai" alt="Imagen 4 Optimized Visual" loading="lazy">
                        <div class="absolute bottom-4 left-4">
                            <span class="glass px-3 py-1 rounded-lg text-[9px] font-bold text-white uppercase tracking-tighter">AI Visual Gen: Imagen-4 Class</span>
                        </div>
                    </div>

                    <div class="text-sm leading-relaxed text-gray-300 whitespace-pre-wrap font-medium">${cleanContent}</div>
                    
                    <div class="mt-8 pt-6 border-t border-white/5 flex justify-between items-center">
                        <p class="text-[9px] text-gray-600 font-bold uppercase">StudioX Marketing Cloud</p>
                        <div class="flex gap-2">
                             <i class="fab fa-instagram text-gray-600 text-xs"></i>
                             <i class="fab fa-linkedin text-gray-600 text-xs"></i>
                             <i class="fab fa-tiktok text-gray-600 text-xs"></i>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        async function copyFull(btn) {
            const card = btn.closest('.strategy-card');
            const text = card.innerText;
            await navigator.clipboard.writeText(text);
            btn.innerHTML = '<i class="fas fa-check text-cyan-400"></i>';
            setTimeout(() => btn.innerHTML = '<i class="fas fa-copy"></i>', 2000);
        }
    </script>
</body>
</html>
